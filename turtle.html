<html>
    <head>
        <style>
            .parent {
                display: flex;
                flex-direction: horizontal;
            }
            #board {
                border-collapse: collapse;
            }
            .boardRow {
                height: 80px;
            }
            .boardCell {
                width: 80px;
                border: 1px solid black;
            }
            .actionCell {
                height: 1.5em;
                width: 100px;
                border: 1px solid black;
            }
            .actionCell[current="1"] {
                background-color: lightcyan;
            }
            .container {
                position: relative;
            }
            #robot {
                position: absolute;
                top: 0;
                left: 0;
                width: 80px;
                height: 80px;
                text-align: center;
                transition-property: left, top;
                transition-duration: 1.5s;
                transition-timing-function: linear;
            }
            .actionListContainer {
                margin-top: 3em;
                border-collapse: collapse;
                margin-left: 7em;
            }
            .directions img:active {
                background-color: green;
            }
        </style>
        <script>
            const DIRECTIONS = {
                "LEFT": "LEFT",
                "RIGHT": "RIGHT",
                "UP": "UP",
                "DOWN": "DOWN",
            }
            const BOARD_SIZE = 6;
            const STEP_DELAY = 1500;

            let robot;
            let board;
            let upButton;
            let downButton;
            let leftButton;
            let rightButton;
            let actionList;

            const boardCells = [];
            const actionCells = [];
            const robotPosition = [0, 0];
            let isMoving = false;
            let requiredPathLength = 5;
            let currentPath = [];

            const executeAction = (action) => {
                if (action == DIRECTIONS.LEFT){ 
                    robotPosition[0] = Math.max(robotPosition[0] - 1, 0);
                } else if (action == DIRECTIONS.RIGHT){
                    robotPosition[0] = Math.min(robotPosition[0] + 1, BOARD_SIZE - 1);
                } else if (action == DIRECTIONS.UP){
                    robotPosition[1] = Math.max(robotPosition[1] - 1, 0);
                } else if (action == DIRECTIONS.DOWN){
                    robotPosition[1] = Math.min(robotPosition[1] + 1, BOARD_SIZE - 1);
                }
                robot.style.left = `${robotPosition[0] * 83}px`;
                robot.style.top = `${robotPosition[1] * 80}px`;
            };

            const endTurn = () => {
                isMoving = false;
                currentPath = [];
                for (var i = 0; i < actionCells.length; i++) {
                    actionCells[i].textContent = "";
                    actionCells[i].setAttribute("current", "0");
                }
            };

            const followPath = (pathToFollow, index) => {
                index = index || 0;
                if (index >= pathToFollow.length) {
                    endTurn();
                    return;
                }
                isMoving = true;
                const action = pathToFollow[index];
                actionCells[index].setAttribute("current", "1");
                for (i = 0; i < index; i++) {
                    actionCells[i].setAttribute("current", "0");
                }
                executeAction(action);
                setTimeout(() => followPath(pathToFollow, index + 1), STEP_DELAY);
            };

            const recordAction = (action) => {
                if (isMoving) {
                    return;
                }
                const actionLabel = `${action[0].toUpperCase()}${action.slice(1).toLowerCase()}`;
                actionCells[currentPath.length].textContent = actionLabel;
                currentPath.push(action);
                if (currentPath.length >= requiredPathLength) {
                    followPath(currentPath);
                }
            }

            const initializeBoard = () => {
                for (i = 0; i < BOARD_SIZE; i++) {
                    const row = document.createElement("tr");
                    row.className = "boardRow";
                    const boardRow = [];
                    for (j = 0; j < BOARD_SIZE; j++) {
                        const cell = document.createElement("td");
                        cell.className = "boardCell";
                        row.appendChild(cell);
                        boardRow.push(cell);
                    }
                    board.appendChild(row);
                    boardCells.push(boardRow);
                }
            };

            const initializeActionList = () => {
                for (var i = 0; i < requiredPathLength; i++) {
                    const actionRow = document.createElement("tr");
                    const actionCell = document.createElement("td");
                    actionRow.appendChild(actionCell);
                    actionCell.className = "actionCell";
                    actionCells.push(actionCell);
                    actionList.appendChild(actionRow);
                }
            };

            window.onload = function() {
                board = document.getElementById("board");
                robot = document.getElementById("robot");
                upButton = document.getElementById("up-button");
                downButton = document.getElementById("down-button");
                leftButton = document.getElementById("left-button");
                rightButton = document.getElementById("right-button");
                actionList = document.getElementById("actionList");

                initializeBoard();
                initializeActionList();
                upButton.onclick = () => {
                    recordAction(DIRECTIONS.UP);
                };
                downButton.onclick = () => {
                    recordAction(DIRECTIONS.DOWN);
                };
                leftButton.onclick = () => {
                    recordAction(DIRECTIONS.LEFT);
                };
                rightButton.onclick = () => {
                    recordAction(DIRECTIONS.RIGHT);
                };
            };
        </script>
    </head>
    <body>
        <div class="parent">
            <div class="container">
                <div id="robot">
                    <img width="80" height="80" src="https://www.svgrepo.com/show/485124/roomba-style-cleaning.svg"/>
                </div>
                <table id="board">
                </table>
            </div>
            <div>
                <table class="directions">
                    <tr>
                        <td id="left-button">
                            <img width="80" height="80" src="https://www.svgrepo.com/show/69399/left-arrow.svg"/>
                        </td>
                        <td id="up-button">
                            <img width="80" height="80" src="https://www.svgrepo.com/show/343814/up-arrow.svg"/>
                        </td>
                        <td id="down-button">
                            <img width="80" height="80" src="https://www.svgrepo.com/show/343772/down-arrow.svg"/>
                        </td>
                        <td id="right-button">
                            <img width="80" height="80" src="https://www.svgrepo.com/show/55411/right-arrow.svg"/>
                        </td>
                    </tr>
                </table>
                <table class="actionListContainer" id="actionList"></table>
            </div>
        </div>
    </body>
</html>